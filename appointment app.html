<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Appointment App</title>
  </head>
  <body>
    <h1>Appointment App</h1>

    <!-- Form to add appointments -->
    <form id="appointmentForm">
      <label for="name">Name:</label>
      <input type="text" id="name" required /><br /><br />

      <label for="email">Email:</label>
      <input type="email" id="email" required /><br /><br />

      <label for="mobile">Mobile Number:</label>
      <input type="tel" id="mobile" required /><br /><br />

      <button type="submit">Add Appointment</button>
    </form>

    <hr />

    <!-- Display appointments -->
    <h2>Appointments</h2>
    <ul id="appointmentList">
      <!-- Appointments will be listed here -->
    </ul>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const appointmentForm = document.getElementById("appointmentForm");
        const appointmentList = document.getElementById("appointmentList");

        appointmentForm.addEventListener("submit", async (event) => {
          event.preventDefault();

          // Get form values
          const name = document.getElementById("name").value;
          const email = document.getElementById("email").value;
          const mobile = document.getElementById("mobile").value;

          // Create a new appointment object
          const newAppointment = {
            name,
            email,
            mobile,
          };

          try {
            // Simulate sending the appointment to the server (replace with actual API call)
            const response = await axios.post(
              "/api/appointments",
              newAppointment
            );
            const createdAppointment = response.data; // Assuming the server responds with the created appointment

            // Add the new appointment to the list
            const listItem = document.createElement("li");
            listItem.textContent = `Name: ${createdAppointment.name}, Email: ${createdAppointment.email}, Mobile: ${createdAppointment.mobile}`;

            // Create delete and edit buttons
            const deleteButton = document.createElement("button");
            deleteButton.textContent = "Delete";
            deleteButton.addEventListener("click", async () => {
              // Simulate deleting the appointment (replace with actual API call)
              // You'll need to implement the logic to delete the appointment on the server
              listItem.remove(); // Remove the appointment from the list
            });

            const editButton = document.createElement("button");
            editButton.textContent = "Edit";
            editButton.addEventListener("click", () => {
              // Implement logic to edit appointment
              // This might involve populating the form fields with appointment data for editing
              // You'll need to define how editing should work
              console.log("Edit button clicked");
            });

            // Append buttons to the list item
            listItem.appendChild(deleteButton);
            listItem.appendChild(editButton);

            // Add the new appointment item to the list
            appointmentList.appendChild(listItem);

            // Clear the form after adding the appointment
            appointmentForm.reset();
          } catch (error) {
            console.error("Error adding appointment:", error);
          }
        });
      });
    </script>
  </body>
</html>
